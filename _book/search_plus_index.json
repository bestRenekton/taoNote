{"./":{"url":"./","title":"æ¦‚è¿°","keywords":"","body":" taoNote taoNote é¢„è§ˆåœ°å€ è¿™æ˜¯ä»€ä¹ˆ? ä¸€äº›ç¬”è®°ï¼Œæ–¹ä¾¿è‡ªå·±æŸ¥é˜…,ä¼šæŒç»­æ›´æ–°... åŠ¨æœº çœ‹äº† Winter è€å¸ˆçš„ã€Šé‡å­¦å‰ç«¯ã€‹ï¼Œæ·±æœ‰æ„Ÿè§¦ï¼Œè‡ªå·±å¹³æ—¶è™½ç„¶æœ‰è®°ç¬”è®°çš„ä¹ æƒ¯ï¼Œä½†æ˜¯æ‰€è®°è½½çš„å¤§å¤šæ˜¯åˆ†æ•£çš„çŸ¥è¯†ç‚¹ï¼Œè€Œè¿™æ­£å¥½åˆæ˜¯å‰ç«¯çš„ç‰¹ç‚¹ï¼ŒçŸ¥è¯†ç‚¹å¤šè€Œæ‚ã€‚å¦‚æžœæ²¡æœ‰è‡ªå·±çš„çŸ¥è¯†ä½“ç³»ï¼Œå¾ˆéš¾æ·±å…¥ä¸‹åŽ»ï¼Œæ‰€ä»¥ç”¨æ­¤é¡¹ç›®æ¥é‡æž„è‡ªå·±çš„çŸ¥è¯†ä½“ç³»ï¼Œç”¨ç§‘å­¦çš„æ–¹æ³•æ¥å­¦ä¹ å‰ç«¯ã€‚ æ˜Žç¡®ä½ çš„å‰ç«¯å­¦ä¹ è·¯çº¿ä¸Žæ–¹æ³• å»ºç«‹çŸ¥è¯†æž¶æž„ å¦‚æžœæˆ‘ä»¬è¦ç»™ JavaScript çŸ¥è¯†åšä¸€ä¸ªé¡¶å±‚ç›®å½•ï¼Œè¯¥æ€Žä¹ˆåšå‘¢ï¼Ÿ å¦‚æžœæˆ‘ä»¬æŠŠä¸€äº›ç‰¹åˆ«æµè¡Œçš„æœ¯è¯­å’Œé—®é¢˜ï¼Œæ‹¼å‡‘èµ·æ¥ï¼Œå¯èƒ½ä¼šå˜æˆè¿™æ ·ï¼š ç±»åž‹è½¬æ¢ï¼›this æŒ‡é’ˆï¼›é—­åŒ…ï¼›ä½œç”¨åŸŸé“¾ï¼›åŽŸåž‹é“¾ã€‚ã€‚ã€‚ è¿™å…¶å®žä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æžœï¼Œå› ä¸ºè¿™äº›çŸ¥è¯†ç‚¹ä¹‹é—´ï¼Œæ²¡æœ‰ä»»ä½•é€»è¾‘å…³ç³»ã€‚ å¯¹äºŽä»»ä½•è®¡ç®—æœºè¯­è¨€æ¥è¯´ï¼Œå¿…å®šæ˜¯â€œç”¨è§„å®šçš„æ–‡æ³•ï¼ŒåŽ»è¡¨è¾¾ç‰¹å®šè¯­ä¹‰ï¼Œæœ€ç»ˆæ“ä½œè¿è¡Œæ—¶çš„â€ä¸€ä¸ªè¿‡ç¨‹ã€‚æ‰€ä»¥å¤§è‡´åº”è¯¥è¿™æ ·æ¥åˆ’åˆ† - æ–‡æ³• - è¯æ³• - ç›´æŽ¥é‡ã€å…³é”®å­—ã€è¿ç®—ç¬¦ã€‚ã€‚ã€‚ - è¯­æ³• - è¡¨è¾¾å¼ã€è¯­å¥ã€å‡½æ•°ã€å¯¹è±¡ã€æ¨¡å—ã€‚ã€‚ã€‚ - è¯­ä¹‰ - è¿è¡Œæ—¶ - æ•°æ®ç»“æž„ - æ‰§è¡Œè¿‡ç¨‹ï¼ˆç®—æ³•ï¼‰ è¿½æœ¬æº¯æº å‰ç«¯æŠ€æœ¯èƒŒåŽçš„æ ¸å¿ƒæ€æƒ³ æŠ€èƒ½æ ‘ "},"doc/":{"url":"doc/","title":"ç›®å½•","keywords":"","body":" ç†è®ºçŸ¥è¯† ç¡¬çŸ¥è¯† HTTP æ ‡å‡† ç½‘ç»œä¸Žå®‰å…¨ åŠ å¯† OAuth è®¤è¯ JWT W3C æ ‡å‡† HTML HTML5 CSS CSS3 JavaScript æ–‡æ³• è¯æ³• ç›´æŽ¥é‡ã€å…³é”®å­—ã€è¿ç®—ç¬¦ã€‚ã€‚ã€‚ è¯­æ³• è¡¨è¾¾å¼ã€è¯­å¥ã€å‡½æ•°ã€å¯¹è±¡ã€æ¨¡å—ã€‚ã€‚ã€‚ è¯­ä¹‰ è¿è¡Œæ—¶ æ•°æ®ç»“æž„ æ‰§è¡Œè¿‡ç¨‹ï¼ˆç®—æ³•ï¼‰ XML ECMAScript æ ‡å‡† ES6 2015 ES7 2016 ES8 2017 ES9 2018 ES10 2019 ES11 2020 è½¯çŸ¥è¯† ç®—æ³• åŸºç¡€ç®—æ³• å¤æ‚åº¦ æŽ’åº å†’æ³¡ å¿«æŽ’ æœç´¢ äºŒåˆ†æŸ¥æ‰¾ æ•°æ®ç»“æž„ é“¾è¡¨ æ ‘ å›¾ è®¾è®¡æ¨¡å¼ è®¾è®¡æ¨¡å¼åŸºç¡€ è®¾è®¡æ¨¡å¼å®žè·µ é¢å‘å¯¹è±¡ å•ä¾‹ å‘å¸ƒè®¢é˜…æ¨¡å¼ äº‹ä»¶ç®¡ç†å™¨ Vue æ›´æ–°æœºåˆ¶ react-redux æ›´æ–°æœºåˆ¶ ä»£ç†æ¨¡å¼ Vue3 ç»„åˆæ¨¡å¼ é«˜é˜¶ç»„ä»¶ AOP å‘½ä»¤æ¨¡å¼ å¯Œæ–‡æœ¬ç¼–è¾‘ ç­–ç•¥æ¨¡å¼ js çš„å¤©ç„¶å¤šæ€ ç»„åˆæ¨¡å¼ æ–‡ä»¶æ•°ç»“æž„ è§‚å¯Ÿè€…æ¨¡å¼ è£…é¥°å™¨æ¨¡å¼ é¢è¯• é¢è¯•å‡†å¤‡ JD åˆ†æž ä¸€é¢ äºŒé¢ ä¸‰é¢ é¢è¯•å¿ƒæ€ èŒä¸šè§„åˆ’ è®¾è®¡/UI/æ‘„å½± ç¼–ç å¼€å‘ å¼€å‘å·¥å…· ç¼–è¾‘å™¨ VSCode WebStorm æ•ˆçŽ‡å·¥å…· ç‰ˆæœ¬æŽ§åˆ¶ Git SVN è°ƒè¯•/æµ‹è¯• è°ƒè¯• æµ‹è¯• æµ‹è¯•åˆ†ç±» å•å…ƒæµ‹è¯• E2E æµ‹è¯• React æµ‹è¯• æ‰“åŒ…/éƒ¨ç½² æ‰“åŒ… webpack Tree Shaking ä»£ç åŽ‹ç¼© æŒ‰éœ€å¼•å…¥ éƒ¨ç½² Linux å®¹å™¨ æŒç»­é›†æˆ è¿è¡ŒçŽ¯å¢ƒ æµè§ˆå™¨ å®žçŽ°åŽŸç† API DOM BOM äº‹ä»¶ è·¨åŸŸ æ€§èƒ½ä¼˜åŒ– æ€§èƒ½æŒ‡æ ‡ æ€§èƒ½ä¼˜åŒ–å†›è§„ ä»£ç æ‰§è¡Œæ›´å¿« é˜²æŠ– èŠ‚æµ React æ€§èƒ½ä¼˜åŒ– Vue æ€§èƒ½ä¼˜åŒ– æ–‡ä»¶åŠ è½½æ›´å¿« æ‰“åŒ…åŽ‹ç¼© ç¼“å­˜ SSR å¼‚å¸¸ç›‘æŽ§ æ•èŽ·å¼‚å¸¸ Sentry web å®‰å…¨ æŒä¹…åŒ–æ”»å‡» çˆ¬è™«å¯¹æŠ— å®‰å…¨æ”»é˜² å®‰å…¨æ¼æ´ž åŒæºç­–ç•¥ SQL æ³¨å…¥ XSS CSRF å…¼å®¹ ç«¯ PC æ¡Œé¢åº”ç”¨ Electron NW.js ç§»åŠ¨ åŽŸç”Ÿå¼€å‘ iOS Android è·¨å¹³å° H5+åŽŸç”Ÿ å…¬ä¼—å· å°ç¨‹åº Cordovaã€Ionic JavaScript å¼€å‘+åŽŸç”Ÿæ¸²æŸ“ React Native Weex å¿«åº”ç”¨ è‡ªç»˜ UI+åŽŸç”Ÿ Flutter QT for mobile Node.js ç±»åº“æ¡†æž¶ ç”¨äºŽæµè§ˆå™¨ jQuery Bootstrap React Vue Angular ç”¨äºŽ Node.js Express Koa è¯­è¨€ Typescript AssemblyScript Dart PHP Python æŠ€æœ¯è¶‹åŠ¿ serverless Faas + BaaS äº‘åŽŸç”Ÿ å¾®å‰ç«¯ PWA WebAssembly å‡½æ•°å¼ç¼–ç¨‹ ä¹¦ç± JS ã€ŠJavaScript é«˜çº§ç¨‹åºè®¾è®¡ã€‹ ã€ŠJavaScript è¯­è¨€ç²¾ç²¹ã€‹ ã€ŠJavaScript è®¾è®¡æ¨¡å¼ä¸Žå¼€å‘å®žè·µã€‹ CSS ã€Šcss æƒå¨æŒ‡å—ã€‹ ã€ŠCSS ä¸–ç•Œã€‹ æ¡†æž¶ å®˜ç½‘å’Œæºç ï¼Œ ã€ŠReact å‰ç«¯æŠ€æœ¯ä¸Žå·¥ç¨‹å®žè·µã€‹ ã€Šæ·±å…¥æµ…å‡º Vue.jsã€‹ ç½‘ç»œï¼š ã€Šå›¾è§£ httpã€‹ ç¼–ç¨‹æ€æƒ³ï¼š ã€ŠUnix ç¼–ç¨‹è‰ºæœ¯ã€‹ ã€Šä»£ç å¤§å…¨ã€‹ å·¥ç¨‹æ€æƒ³ï¼š ã€Šè½¯ä»¶å·¥ç¨‹ä¸Žè®¡ç®—ã€‹ä¸‰å· ã€Šäººæœˆç¥žè¯ã€‹ å¯è§†åŒ–ï¼š ã€Šæ•°æ®ä¹‹ç¾Žã€‹ "},"doc/knowledge/hard/NetWork/OAuth.html":{"url":"doc/knowledge/hard/NetWork/OAuth.html","title":"OAuth è®¤è¯","keywords":"","body":" OAuth åŽŸç† OAuth å°±æ˜¯ä¸€ç§æŽˆæƒæœºåˆ¶ã€‚æ•°æ®çš„æ‰€æœ‰è€…å‘Šè¯‰ç³»ç»Ÿï¼ŒåŒæ„æŽˆæƒç¬¬ä¸‰æ–¹åº”ç”¨è¿›å…¥ç³»ç»Ÿï¼ŒèŽ·å–è¿™äº›æ•°æ®ã€‚ç³»ç»Ÿä»Žè€Œäº§ç”Ÿä¸€ä¸ªçŸ­æœŸçš„è¿›å…¥ä»¤ç‰Œï¼ˆtokenï¼‰ï¼Œç”¨æ¥ä»£æ›¿å¯†ç ï¼Œä¾›ç¬¬ä¸‰æ–¹åº”ç”¨ä½¿ç”¨ã€‚ ä»¤ç‰Œä¸Žå¯†ç å·®å¼‚ ä»¤ç‰Œæ˜¯çŸ­æœŸçš„ï¼Œåˆ°æœŸä¼šè‡ªåŠ¨å¤±æ•ˆï¼Œç”¨æˆ·è‡ªå·±æ— æ³•ä¿®æ”¹ã€‚å¯†ç ä¸€èˆ¬é•¿æœŸæœ‰æ•ˆï¼Œç”¨æˆ·ä¸ä¿®æ”¹ï¼Œå°±ä¸ä¼šå‘ç”Ÿå˜åŒ–ã€‚ ä»¤ç‰Œå¯ä»¥è¢«æ•°æ®æ‰€æœ‰è€…æ’¤é”€ï¼Œä¼šç«‹å³å¤±æ•ˆã€‚å¯†ç ä¸€èˆ¬ä¸å…è®¸è¢«ä»–äººæ’¤é”€ã€‚ ä»¤ç‰Œæœ‰æƒé™èŒƒå›´ï¼ˆscopeï¼‰ï¼Œæ¯”å¦‚åªèƒ½è¿›å°åŒºçš„äºŒå·é—¨ã€‚å¯¹äºŽç½‘ç»œæœåŠ¡æ¥è¯´ï¼Œåªè¯»ä»¤ç‰Œå°±æ¯”è¯»å†™ä»¤ç‰Œæ›´å®‰å…¨ã€‚å¯†ç ä¸€èˆ¬æ˜¯å®Œæ•´æƒé™ã€‚ å››ç§æ–¹å¼ æŽˆæƒç å¼ è¿™ç§æ–¹å¼æ˜¯æœ€å¸¸ç”¨çš„æµç¨‹ï¼Œå®‰å…¨æ€§ä¹Ÿæœ€é«˜ï¼Œå®ƒé€‚ç”¨äºŽé‚£äº›æœ‰åŽç«¯çš„ Web åº”ç”¨ã€‚æŽˆæƒç é€šè¿‡å‰ç«¯ä¼ é€ï¼Œä»¤ç‰Œåˆ™æ˜¯å‚¨å­˜åœ¨åŽç«¯ï¼Œè€Œä¸”æ‰€æœ‰ä¸Žèµ„æºæœåŠ¡å™¨çš„é€šä¿¡éƒ½åœ¨åŽç«¯å®Œæˆã€‚è¿™æ ·çš„å‰åŽç«¯åˆ†ç¦»ï¼Œå¯ä»¥é¿å…ä»¤ç‰Œæ³„æ¼ã€‚ A å‰ç«¯è·³è½¬ Bï¼ŒåŒæ—¶æºå¸¦clientId,AåŽç«¯çš„callBack B è¦æ±‚ç”¨æˆ·ç™»å½•ï¼Œä¹‹åŽè¯¢é—®æ˜¯å¦åŒæ„æŽˆæƒ,å¦‚æžœåŒæ„ï¼Œåˆ™ä¼šæ‰“åˆ° A åŽç«¯çš„ callBack è¯·æ±‚ï¼Œå¹¶æºå¸¦æŽˆæƒç code A åŽç«¯æ‹¿åˆ°æŽˆæƒç codeï¼Œå¹¶ä½¿ç”¨client_secretåŽ»è¯·æ±‚ B çš„ä»¤ç‰Œtokenï¼Œå› ä¸ºæ˜¯åŽç«¯è¯·æ±‚ï¼Œæ‰€ä»¥å¾ˆå®‰å…¨ A åŽç«¯æ‹¿åˆ°ä»¤ç‰Œtokenï¼ŒåŽ»è¯·æ±‚ B çš„ API éšè—å¼ æœ‰äº› Web åº”ç”¨æ˜¯çº¯å‰ç«¯åº”ç”¨ï¼Œæ²¡æœ‰åŽç«¯ã€‚è¿™æ—¶å°±ä¸èƒ½ç”¨ä¸Šé¢çš„æ–¹å¼äº†ï¼Œå¿…é¡»å°†ä»¤ç‰Œå‚¨å­˜åœ¨å‰ç«¯,æ˜¯å¾ˆä¸å®‰å…¨çš„ã€‚ A å‰ç«¯è·³è½¬ Bï¼ŒåŒæ—¶æºå¸¦clientId,Aå‰ç«¯åœ°å€çš„callBack B ç›´æŽ¥å°†ä»¤ç‰Œtokenè¿”å›žåˆ° A å‰ç«¯åœ°å€çš„é”šç‚¹ä¸Šï¼Œæ¯”å¦‚https://a.com/callback#token=ACCESS_TOKEN å¯†ç å¼ ç›´æŽ¥ä½¿ç”¨å¯†ç åŽ»è¯·æ±‚å‡­è¯ï¼Œéœ€è¦ç”¨æˆ·ç»™å‡ºè‡ªå·±çš„ç”¨æˆ·å/å¯†ç ï¼Œæ˜¾ç„¶é£Žé™©å¾ˆå¤§ï¼Œå› æ­¤åªé€‚ç”¨äºŽå…¶ä»–æŽˆæƒæ–¹å¼éƒ½æ— æ³•é‡‡ç”¨çš„æƒ…å†µï¼Œè€Œä¸”å¿…é¡»æ˜¯ç”¨æˆ·é«˜åº¦ä¿¡ä»»çš„åº”ç”¨ã€‚ A å‰ç«¯è¯·æ±‚ B æŽ¥å£ï¼ŒåŒæ—¶æºå¸¦clientId,username,password B ç›´æŽ¥åœ¨è¿”å›žé‡Œç»™å‡ºä»¤ç‰Œtoken å‡­è¯å¼ é€‚ç”¨äºŽæ²¡æœ‰å‰ç«¯çš„å‘½ä»¤è¡Œåº”ç”¨ï¼Œå³åœ¨å‘½ä»¤è¡Œä¸‹è¯·æ±‚ä»¤ç‰Œã€‚ A åœ¨å‘½ä»¤è¡Œå‘ B å‘å‡ºè¯·æ±‚,æºå¸¦clientId,client_secret B éªŒè¯åŽï¼Œç›´æŽ¥è¿”å›žä»¤ç‰Œtoken ä»¤ç‰Œä½¿ç”¨,æ›´æ–° ç½‘ç«™æ‹¿åˆ°ä»¤ç‰Œä»¥åŽï¼Œå°±å¯ä»¥å‘ B ç½‘ç«™çš„ API è¯·æ±‚æ•°æ®äº†ã€‚æ¯ä¸ªå‘åˆ° API çš„è¯·æ±‚ï¼Œéƒ½å¿…é¡»å¸¦æœ‰ä»¤ç‰Œã€‚å¯ä»¥ç»Ÿä¸€æºå¸¦åœ¨ header ä¸­ const result = await axios({ method: \"get\", url: `https://api.github.com/user`, headers: { accept: \"application/json\", Authorization: `token ${accessToken}`, }, }); ä»¤ç‰Œçš„æœ‰æ•ˆæœŸåˆ°äº†ï¼Œå¦‚æžœè®©ç”¨æˆ·é‡æ–°èµ°ä¸€éä¸Šé¢çš„æµç¨‹ï¼Œå†ç”³è¯·ä¸€ä¸ªæ–°çš„ä»¤ç‰Œï¼Œå¾ˆå¯èƒ½ä½“éªŒä¸å¥½ï¼Œè€Œä¸”ä¹Ÿæ²¡æœ‰å¿…è¦ã€‚OAuth 2.0 å…è®¸ç”¨æˆ·è‡ªåŠ¨æ›´æ–°ä»¤ç‰Œã€‚ ä¾‹å­ Github A ç½‘ç«™è®©ç”¨æˆ·è·³è½¬åˆ° GitHubã€‚ GitHub è¦æ±‚ç”¨æˆ·ç™»å½•ï¼Œç„¶åŽè¯¢é—®\"A ç½‘ç«™è¦æ±‚èŽ·å¾— xx æƒé™ï¼Œä½ æ˜¯å¦åŒæ„ï¼Ÿ\" ç”¨æˆ·åŒæ„ï¼ŒGitHub å°±ä¼šé‡å®šå‘å›ž A ç½‘ç«™ï¼ŒåŒæ—¶å‘å›žä¸€ä¸ªæŽˆæƒç ã€‚ A ç½‘ç«™ä½¿ç”¨æŽˆæƒç ï¼Œå‘ GitHub è¯·æ±‚ä»¤ç‰Œã€‚ GitHub è¿”å›žä»¤ç‰Œ. A ç½‘ç«™ä½¿ç”¨ä»¤ç‰Œï¼Œå‘ GitHub è¯·æ±‚ç”¨æˆ·æ•°æ®ã€‚ "},"doc/development/version-control/git.html":{"url":"doc/development/version-control/git.html","title":"Git","keywords":"","body":" å›¾è§£ å¸¸ç”¨å‘½ä»¤ æ–°å»º åœ¨å½“å‰ç›®å½•æ–°å»ºä¸€ä¸ª Git ä»£ç åº“ git init æ–°å»ºä¸€ä¸ªç›®å½•ï¼Œå°†å…¶åˆå§‹åŒ–ä¸º Git ä»£ç åº“ git init [project-name] ä¸‹è½½ä¸€ä¸ªé¡¹ç›®å’Œå®ƒçš„æ•´ä¸ªä»£ç åŽ†å² git clone [url] ä»¥å½“å‰åˆ†æ”¯çš„å½“å‰çŠ¶æ€åˆ›å»ºæ–°åˆ†æ”¯å¹¶åˆ‡æ¢åˆ°æ–°åˆ†æ”¯ git checkout -b [xxx] æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼ŒæŒ‡å‘æŸä¸ª tag git checkout -b [xxx] [tag] é…ç½® æ˜¾ç¤ºå½“å‰çš„ Git é…ç½® git config --list ç¼–è¾‘ Git é…ç½®æ–‡ä»¶ git config -e [--global] è®¾ç½®æäº¤ä»£ç æ—¶çš„ç”¨æˆ·ä¿¡æ¯ git config [--global] user.name \"[name]\" git config [--global] user.email \"[email address]\" è®¾ç½®åˆ«å git config --global alias.co checkout git config --global alias.br branch git config --global alias.rank \"shortlog -sn --no-merges\" å¢žåŠ /åˆ é™¤æ–‡ä»¶ æ·»åŠ  git add . æ·»åŠ å½“å‰ç›®å½•çš„æ‰€æœ‰æ–‡ä»¶åˆ°æš‚å­˜åŒº git add -p æ·»åŠ æ¯ä¸ªå˜åŒ–å‰ï¼Œéƒ½ä¼šè¦æ±‚ç¡®è®¤.å¯¹äºŽåŒä¸€ä¸ªæ–‡ä»¶çš„å¤šå¤„å˜åŒ–ï¼Œå¯ä»¥å®žçŽ°åˆ†æ¬¡æäº¤ y add æ­¤å— n æ”¾å¼ƒæ­¤å— q é€€å‡º add a add æ•´ä¸ªæ–‡ä»¶ d æ”¾å¼ƒæ•´ä¸ªæ–‡ä»¶ e ç¼–è¾‘ git add [file1] [file2] æŒ‡å®šæ–‡ä»¶ git add [dir] æ·»åŠ æŒ‡å®šç›®å½•,åŒ…æ‹¬å­ç›®å½• åˆ é™¤ git rm [file1][file2] åˆ é™¤å·¥ä½œåŒºæ–‡ä»¶ï¼Œå¹¶ä¸”å°†è¿™æ¬¡åˆ é™¤æ”¾å…¥æš‚å­˜åŒº git rm --cached [file] åœæ­¢è¿½è¸ªæŒ‡å®šæ–‡ä»¶ï¼Œä½†è¯¥æ–‡ä»¶ä¼šä¿ç•™åœ¨å·¥ä½œåŒº git mv [file-original][file-renamed] æ”¹åæ–‡ä»¶ï¼Œå¹¶ä¸”å°†è¿™ä¸ªæ”¹åæ”¾å…¥æš‚å­˜åŒº(éœ€è¦è·¯å¾„) æäº¤ æäº¤æš‚å­˜åŒºçš„æŒ‡å®šæ–‡ä»¶åˆ°ä»“åº“åŒº git commit [file1][file2] ... -m [message] æäº¤æš‚å­˜åŒºåˆ°ä»“åº“åŒº git commit -m [message] ä½¿ç”¨ä¸€æ¬¡æ–°çš„ commitï¼Œæ›¿ä»£ä¸Šä¸€æ¬¡æäº¤ git commit --amend -m [message] å˜åŸº åˆå¹¶å¤šæ¬¡ commit git rebase -i [commitId] æ¯”å¦‚æäº¤äº† 1ï¼Œ2ï¼Œ3ï¼Œæƒ³åˆå¹¶ 3 è€…ï¼Œåªéœ€è¦æ‰¾åˆ° 1 ä¹‹å‰çš„ commitId pick1 squash2 squash3 åˆ™æäº¤å°±åˆå¹¶äº†ï¼Œå¹¶ä¸”åªæœ‰ç¬¬ä¸€æ¬¡çš„ msg è¿œç¨‹åŒæ­¥ ä¸‹è½½è¿œç¨‹ä»“åº“çš„æ‰€æœ‰å˜åŠ¨ git fetch -a æ˜¾ç¤ºæ‰€æœ‰è¿œç¨‹ä»“åº“ git remote -v æ˜¾ç¤ºæŸä¸ªè¿œç¨‹ä»“åº“çš„ä¿¡æ¯ git remote show [remote] å–å›žè¿œç¨‹ä»“åº“çš„å˜åŒ–ï¼Œå¹¶ä¸Žæœ¬åœ°åˆ†æ”¯åˆå¹¶ git pull [branch] ä¸Šä¼ æœ¬åœ°æŒ‡å®šåˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“ git push [branch] å¼ºè¡ŒæŽ¨é€å½“å‰åˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“ï¼Œå³ä½¿æœ‰å†²çª git push -f å›žæ»šæ’¤é”€ é‡ç½®æš‚å­˜åŒºä¸Žå·¥ä½œåŒºï¼Œä¸Žä¸Šä¸€æ¬¡ commit ä¿æŒä¸€è‡´ git reset --hard é‡ç½®å½“å‰åˆ†æ”¯çš„æŒ‡é’ˆä¸ºæŒ‡å®š commit git reset --mixed [commit] åŒæ—¶é‡ç½®æš‚å­˜åŒºï¼Œä½†å·¥ä½œåŒºä¸å˜ git reset [commit] é»˜è®¤--mixed git reset --hard [commit] åŒæ—¶é‡ç½®æš‚å­˜åŒºå’Œå·¥ä½œåŒº git reset --soft [commit] å®Œå…¨ä¿ç•™å·¥ä½œåŒºå’Œæš‚å­˜åŒºï¼Œä»…æ”¹å˜ HEAD çš„æŒ‡å‘çš„ä½ç½® å¼ºåˆ¶æ‹‰å– git fetch --all git reset --hard origin/master æ¢å¤ commitï¼Œä½†æ˜¯ä¸ä¼šå½±å“åŽç»­çš„æäº¤ git revert [commit] å›žæ»šå•ä¸ªæ–‡ä»¶ git checkout -- xx/xx æ—¶å…‰æœºï¼Œè®°å½•æ‰€æœ‰æ“ä½œ git reflog åˆ†æ”¯ åˆ—å‡ºæ‰€æœ‰æœ¬åœ°åˆ†æ”¯ git branch åˆ—å‡ºæ‰€æœ‰è¿œç¨‹åˆ†æ”¯ git branch -r åˆ—å‡ºæ‰€æœ‰æœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯ git branch -a æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œä½†ä¾ç„¶åœç•™åœ¨å½“å‰åˆ†æ”¯ git branch [branch-name] æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œå¹¶åˆ‡æ¢åˆ°è¯¥åˆ†æ”¯ git checkout -b [branch] åˆ‡æ¢åˆ°æŒ‡å®šåˆ†æ”¯ï¼Œå¹¶æ›´æ–°å·¥ä½œåŒº git checkout [branch-name] åˆ‡æ¢åˆ°ä¸Šä¸€ä¸ªåˆ†æ”¯ git checkout - åˆå¹¶æŒ‡å®šåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯ git merge [branch] åˆ é™¤åˆ†æ”¯ git branch -d [branch-name] åˆ é™¤è¿œç¨‹åˆ†æ”¯ git push origin -d [branch-name] æŸ¥çœ‹ä¿¡æ¯ æ˜¾ç¤ºæœ‰å˜æ›´çš„æ–‡ä»¶ git status æ˜¾ç¤ºå½“å‰åˆ†æ”¯çš„ç‰ˆæœ¬åŽ†å² git log ä¼˜åŒ– git lg æ˜¾ç¤º commit åŽ†å²ï¼Œä»¥åŠæ¯æ¬¡ commit å‘ç”Ÿå˜æ›´çš„æ–‡ä»¶ git log --stat ä¼˜åŒ– git ll æœç´¢æäº¤åŽ†å²ï¼Œæ ¹æ®å…³é”®è¯ git log -S [keyword] git log -S [keyword] --stat æ˜¾ç¤ºæŒ‡å®šæ–‡ä»¶ç›¸å…³çš„æ¯ä¸€æ¬¡ diff git log -p [file] æ˜¾ç¤ºæŒ‡å®šæ–‡ä»¶æ¯ä¸€è¡Œæ˜¯ä»€ä¹ˆäººåœ¨ä»€ä¹ˆæ—¶é—´ä¿®æ”¹è¿‡ git blame [file] æ˜¾ç¤ºæš‚å­˜åŒºå’Œå·¥ä½œåŒºçš„å·®å¼‚ git diff æ˜¾ç¤ºä¸¤æ¬¡æäº¤ä¹‹é—´çš„å·®å¼‚ git diff [first-branch]...[second-branch] æ˜¾ç¤ºæŸæ¬¡æäº¤çš„å…ƒæ•°æ®å’Œå†…å®¹å˜åŒ– git show [commit] æ˜¾ç¤ºæŸæ¬¡æäº¤æ—¶ï¼ŒæŸä¸ªæ–‡ä»¶çš„å†…å®¹ git show [commit] [filename] æ˜¾ç¤ºæ‰€æœ‰æäº¤è¿‡çš„ç”¨æˆ·ï¼ŒæŒ‰æäº¤æ¬¡æ•°æŽ’åº git shortlog -sn æ˜¾ç¤ºä»Šå¤©ä½ å†™äº†å¤šå°‘è¡Œä»£ç  git diff --shortstat \"@{0 day ago}\" æ ‡ç­¾ åˆ—å‡ºæ‰€æœ‰ tag git tag æŸ¥çœ‹ tag ä¿¡æ¯ git show [tag] æ–°å»º tag git tag [tag] åœ¨å½“å‰ commit git tag [tag][commit] åœ¨æŒ‡å®š commit åˆ é™¤ tag git tag -d [tag] æœ¬åœ° git push origin :refs/tags/[tagName] è¿œç¨‹ æäº¤æ‰€æœ‰ tag git push [remote] --tags æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼ŒæŒ‡å‘æŸä¸ª tag git checkout -b [branch] [tag] è´®è— git stash save \"xxx\" è´®è— git stash listæ‰€æœ‰è´®è— git stash show ï¼šæ˜¾ç¤ºåšäº†å“ªäº›æ”¹åŠ¨ï¼Œé»˜è®¤ show ç¬¬ä¸€ä¸ªå­˜å‚¨ git stash show stash@{1}å¦‚æžœè¦æ˜¾ç¤ºå…¶ä»–å­˜è´® git stash apply åº”ç”¨æŸä¸ªå­˜å‚¨,ä½†ä¸ä¼šæŠŠå­˜å‚¨ä»Žå­˜å‚¨åˆ—è¡¨ä¸­åˆ é™¤ git stash pop åº”ç”¨æŸä¸ªå­˜å‚¨,ä¼šæŠŠå­˜å‚¨ä»Žå­˜å‚¨åˆ—è¡¨ä¸­åˆ é™¤ git stash drop ä¸¢å¼ƒ git stash clear æ¸…ç©ºæ‰€æœ‰ ä¸€äº› alias checkout => co branch => br log => lgç®€ç•¥,llå…·ä½“å˜åŠ¨ diff => d add + commit -m => acm [msg] status => s å¸¸ç”¨é…ç½® alias.s=status alias.a=!git add . && git status alias.au=!git add -u . && git status alias.aa=!git add . && git add -u . && git status alias.c=commit alias.cm=commit -m alias.ca=commit --amend alias.ac=!git add . && git commit alias.acm=!git add . && git commit -m alias.l=log --graph --all --pretty=format:'%C(yellow)%h%C(cyan)%d%Creset %s %C(white)- %an, %ar%Creset' alias.ll=log --stat --abbrev-commit alias.lg=log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)%Creset' --abbrev-commit alias.lga=log --color --graph --all --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)%Creset' --abbrev-commit alias.llg=log --color --graph --pretty=format:'%C(bold white)%H %d%Creset%n%s%n%+b%C(bold blue)%an %Creset %C(bold green)%cr (%ci)' --abbrev-commit alias.d=diff alias.master=checkout master alias.spull=svn rebase alias.spush=svn dcommit alias.alias=!git config --list | grep 'alias\\.' | sed 's/alias\\.\\([^=]*\\)=\\(.*\\)/\\1\\ => \\2/' | sort alias.co=checkout alias.br=branch alias.rank=shortlog -sn --no-merges æ¡ˆä¾‹ å…‹éš† å¸¦è´¦å·å¯†ç  git clone http://è´¦å·%40qq.com:å¯†ç @gitee.com/xxxxxx.git æ³¨æ„ï¼šç”¨æˆ·åå¯†ç ä¸­ä¸€å®šè¦è½¬ä¹‰ @ç¬¦å·è½¬ç åŽå˜æˆäº†%40 è§£å†³ git pull/push æ¯æ¬¡éƒ½éœ€è¦è¾“å…¥å¯†ç é—®é¢˜ è¿›å…¥ä½ çš„é¡¹ç›®ç›®å½• git config --global credential.helper store ä¸‹æ¬¡ push æˆ–è€… pull ä¼šè¾“å…¥ä¸€æ¬¡å¯†ç ï¼Œä¹‹åŽä¸éœ€è¦äº† --depth=1 åªæ‹‰åŽ»æœ€è¿‘ä¸€æ¬¡çš„æäº¤è®°å½• git clone -b [branch] --depth=1 [url]å¯ä»¥æ‹‰å¯¹åº”åˆ†æ”¯çš„æœ€è¿‘ä¸€æ¬¡æäº¤ï¼Œæ— å…¶ä»–è®°å½•äº† åª pull æŸä¸€ä¸ªæ–‡ä»¶/å¤¹ git config core.sparsecheckout true //æ­¤æ–¹æ³•é€‚ç”¨äºŽ Git1.7.0 ä»¥åŽç‰ˆæœ¬ï¼Œä¹‹å‰çš„ç‰ˆæœ¬æ²¡æœ‰è¿™ä¸ªåŠŸèƒ½ åœ¨.git/info/sparse-checkout æ–‡ä»¶ä¸­ï¼ˆå¦‚æžœæ²¡æœ‰åˆ™åˆ›å»ºï¼‰æ·»åŠ æŒ‡å®šçš„æ–‡ä»¶/å¤¹ æ¯”å¦‚,åˆ™åªä¼šæœ‰ dist /dist è‡ªåŠ¨è¡¥å…¨åˆ†æ”¯å git-completion brew install bash-completion vim ~/.zshrc# auto-completion if [ -f /opt/local/etc/profile.d/bash_completion.sh ]; then . /opt/local/etc/profile.d/bash_completion.sh fi source ~/.zshrc "},"doc/run/browser/performance/fast-implement/throttle/throttle.html":{"url":"doc/run/browser/performance/fast-implement/throttle/throttle.html","title":"é˜²æŠ–/èŠ‚æµ","keywords":"","body":"é˜²æŠ– æ¯æ¬¡è§¦å‘äº‹ä»¶æ—¶éƒ½å–æ¶ˆä¹‹å‰çš„å»¶æ—¶è°ƒç”¨æ–¹æ³• function debounce(fn) { let timeout = null; // åˆ›å»ºä¸€ä¸ªæ ‡è®°ç”¨æ¥å­˜æ”¾å®šæ—¶å™¨çš„è¿”å›žå€¼ return function () { // è¿™é‡Œä¸èƒ½ç”¨ç®­å¤´å‡½æ•°ï¼Œç”¨äº†thisæŒ‡å‘window,ä»¥å‰æŒ‡å‘input // æ¯å½“ç”¨æˆ·è¾“å…¥çš„æ—¶å€™æŠŠå‰ä¸€ä¸ª setTimeout clear æŽ‰ clearTimeout(timeout); // ç„¶åŽåˆåˆ›å»ºä¸€ä¸ªæ–°çš„ setTimeout, è¿™æ ·å°±èƒ½ä¿è¯interval é—´éš”å†…å¦‚æžœæ—¶é—´æŒç»­è§¦å‘ï¼Œå°±ä¸ä¼šæ‰§è¡Œ fn å‡½æ•° timeout = setTimeout(() => { fn.apply(this, arguments); }, 500); }; } function handle(e) { console.log(e.target.value); } document.getElementById('aa').addEventListener('input', debounce(handle)); èŠ‚æµ é«˜é¢‘äº‹ä»¶è§¦å‘ï¼Œä½†åœ¨nç§’å†…åªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œæ‰€ä»¥èŠ‚æµä¼šç¨€é‡Šå‡½æ•°çš„æ‰§è¡Œé¢‘çŽ‡ function throttle(fn) { let canRun = true; // é€šè¿‡é—­åŒ…ä¿å­˜ä¸€ä¸ªæ ‡è®° return function () {// è¿™é‡Œä¸èƒ½ç”¨ç®­å¤´å‡½æ•°ï¼Œç”¨äº†thisæŒ‡å‘window,ä»¥å‰æŒ‡å‘input // åœ¨å‡½æ•°å¼€å¤´åˆ¤æ–­æ ‡è®°æ˜¯å¦ä¸ºtrueï¼Œä¸ä¸ºtrueåˆ™return if (!canRun) return; // ç«‹å³è®¾ç½®ä¸ºfalse canRun = false; // å°†å¤–éƒ¨ä¼ å…¥çš„å‡½æ•°çš„æ‰§è¡Œæ”¾åœ¨setTimeoutä¸­ setTimeout(() => { // æœ€åŽåœ¨setTimeoutæ‰§è¡Œå®Œæ¯•åŽå†æŠŠæ ‡è®°è®¾ç½®ä¸ºtrue(å…³é”®)è¡¨ç¤ºå¯ä»¥æ‰§è¡Œä¸‹ä¸€æ¬¡å¾ªçŽ¯äº†ã€‚ // å½“å®šæ—¶å™¨æ²¡æœ‰æ‰§è¡Œçš„æ—¶å€™æ ‡è®°æ°¸è¿œæ˜¯falseï¼Œåœ¨å¼€å¤´è¢«returnæŽ‰ fn.apply(this, arguments); canRun = true; }, 500); }; } function handle(e) { console.log(e.target.value); } document.getElementById('aa').addEventListener('input', throttle(handle)); "},"doc/run/browser/performance/fast-load/cache/":{"url":"doc/run/browser/performance/fast-load/cache/","title":"ç¼“å­˜","keywords":"","body":"ç¼“å­˜çš„æ„ä¹‰ ç¼“è§£æœåŠ¡å™¨åŽ‹åŠ›ï¼Œä¸ç”¨æ¯æ¬¡åŽ»è¯·æ±‚èµ„æºï¼› æå‡æ€§èƒ½ï¼Œæ‰“å¼€æœ¬åœ°èµ„æºé€Ÿåº¦å½“ç„¶æ¯”è¯·æ±‚å›žæ¥å†æ‰“å¼€è¦å¿«å¾—å¤šï¼› å‡å°‘å¸¦å®½æ¶ˆè€—ï¼› ç¼“å­˜ç±»åž‹ ä»£ç†æœåŠ¡å™¨ç¼“å­˜ ä»£ç†æœåŠ¡å™¨ç¼“å­˜åŽŸç†å’Œæµè§ˆå™¨ç«¯ç±»ä¼¼ï¼Œä½†è§„æ¨¡è¦å¤§å¾—å¤šï¼Œå› ä¸ºæ˜¯ä¸ºæˆåƒä¸Šä¸‡çš„ç”¨æˆ·æä¾›ç¼“å­˜æœºåˆ¶ã€‚ ç½‘å…³ç¼“å­˜ CDNS(ç½‘ç»œå†…å®¹åˆ†å‘å•†)åˆ†å¸ƒç½‘å…³ç¼“å­˜åˆ°æ•´ä¸ªï¼ˆæˆ–éƒ¨åˆ†ï¼‰äº’è”ç½‘ä¸Šï¼Œå¹¶å‡ºå”®ç¼“å­˜æœåŠ¡ç»™éœ€è¦çš„ç½‘ç«™ï¼Œæ¯”å¦‚å›½å†…çš„ä¸ƒç‰›äº‘ã€åˆæ‹äº‘éƒ½æœ‰è¿™ç§æœåŠ¡ã€‚ æ•°æ®åº“ç¼“å­˜ é¢‘ç¹çš„è¿›è¡Œæ•°æ®åº“æŸ¥è¯¢ï¼Œè¿™æ ·å¯èƒ½å¯¼è‡´æ•°æ®åº“ä¸å ªé‡è´Ÿï¼Œæ‰€ä»¥å­˜èµ·æ¥ï¼Œä¸‹æ¬¡ç›´æŽ¥ç”¨ã€‚ å®¢æˆ·ç«¯ç¼“å­˜ æ•°æ®ä¸è¢«åºåˆ—åŒ– Cache æ•°æ®åºåˆ—åŒ–Storage Cookie Session localStorage sessionStorage indexDB Web SQL ç¦»çº¿ç¼“å­˜ serviceWorker "},"doc/run/browser/performance/fast-load/cache/clientCache.html":{"url":"doc/run/browser/performance/fast-load/cache/clientCache.html","title":"clientCache","keywords":"","body":"Cache æˆ‘ä»¬çŸ¥é“HTTPçš„ç¼“å­˜å±žäºŽå®¢æˆ·ç«¯ç¼“å­˜ï¼ŒåŽé¢ä¼šæåˆ°ä¸ºä»€ä¹ˆå±žäºŽå®¢æˆ·ç«¯ç¼“å­˜ã€‚æ‰€ä»¥æˆ‘ä»¬è®¤ä¸ºæµè§ˆå™¨å­˜åœ¨ä¸€ä¸ªç¼“å­˜æ•°æ®åº“ï¼Œç”¨äºŽå‚¨å­˜ä¸€äº›ä¸ç»å¸¸å˜åŒ–çš„é™æ€æ–‡ä»¶ï¼ˆå›¾ç‰‡ã€cssã€jsç­‰ï¼‰ã€‚æˆ‘ä»¬å°†ç¼“å­˜åˆ†ä¸ºå¼ºåˆ¶ç¼“å­˜å’Œåå•†ç¼“å­˜ã€‚ä¸‹é¢æˆ‘å°†åˆ†åˆ«è¯¦ç»†çš„ä»‹ç»è¿™ä¸¤ç§ç¼“å­˜çš„ç¼“å­˜è§„åˆ™ã€‚ ç¼“å­˜ç­–ç•¥ å¼ºåˆ¶ç¼“å­˜ å½“ç¼“å­˜æ•°æ®åº“ä¸­å·²æœ‰æ‰€è¯·æ±‚çš„æ•°æ®æ—¶ã€‚å®¢æˆ·ç«¯ç›´æŽ¥ä»Žç¼“å­˜æ•°æ®åº“ä¸­èŽ·å–æ•°æ®ã€‚å½“ç¼“å­˜æ•°æ®åº“ä¸­æ²¡æœ‰æ‰€è¯·æ±‚çš„æ•°æ®æ—¶ï¼Œå®¢æˆ·ç«¯çš„æ‰ä¼šä»ŽæœåŠ¡ç«¯èŽ·å–æ•°æ®ã€‚è§¦å‘å¼ºåˆ¶ç¼“å­˜åŽï¼ŒFirefoxæµè§ˆå™¨è¡¨çŽ°ä¸ºä¸€ä¸ªç°è‰²çš„200çŠ¶æ€ç ã€‚chromeä¸º200 (from disk cache)æˆ–æ˜¯200 OK (from memory cache)ï¼Œè¿™é‡Œchromeä¼šæ ¹æ®ä½ çš„å†…å­˜æƒ…å†µæ¥é€‰æ‹©å­˜åœ¨å†…å­˜è¿˜æ˜¯ç¡¬ç›˜ Expires Cache-Control max-age=[ç§’] ç¼“å­˜çš„æ—¶é•¿ï¼Œä¹Ÿæ˜¯å“åº”çš„æœ€å¤§çš„Ageå€¼ no-store ä¸ç¼“å­˜è¯·æ±‚æˆ–æ˜¯å“åº”çš„ä»»ä½•å†…å®¹ no-cache å¼ºåˆ¶æºæœåŠ¡å™¨å†æ¬¡éªŒè¯ç¼“å­˜æ˜¯å¦å¯ç”¨ max-age=0å’Œno-cacheåº”è¯¥æ˜¯ä»Žè¯­æ°”ä¸Šä¸åŒã€‚max-age=0æ˜¯å‘Šè¯‰å®¢æˆ·ç«¯èµ„æºçš„ç¼“å­˜åˆ°æœŸåº”è¯¥å‘æœåŠ¡å™¨éªŒè¯ç¼“å­˜çš„æœ‰æ•ˆæ€§ã€‚è€Œno-cacheåˆ™å‘Šè¯‰å®¢æˆ·ç«¯ä½¿ç”¨ç¼“å­˜å‰å¿…é¡»å‘æœåŠ¡å™¨éªŒè¯ç¼“å­˜çš„æœ‰æ•ˆæ€§ã€‚ private å®¢æˆ·ç«¯å¯ä»¥ç¼“å­˜ public å®¢æˆ·ç«¯å’Œä»£ç†æœåŠ¡å™¨éƒ½å¯ä»¥ç¼“å­˜ Cache-Controlä¼˜å…ˆçº§å¤§äºŽExpires åå•†ç¼“å­˜ åˆç§°å¯¹æ¯”ç¼“å­˜ï¼Œå®¢æˆ·ç«¯ä¼šå…ˆä»Žç¼“å­˜æ•°æ®åº“ä¸­èŽ·å–åˆ°ä¸€ä¸ªç¼“å­˜æ•°æ®çš„æ ‡è¯†ï¼Œå¾—åˆ°æ ‡è¯†åŽè¯·æ±‚æœåŠ¡ç«¯éªŒè¯æ˜¯å¦å¤±æ•ˆï¼ˆæ–°é²œï¼‰ï¼Œå¦‚æžœæ²¡æœ‰å¤±æ•ˆæœåŠ¡ç«¯ä¼šè¿”å›ž304ï¼Œæ­¤æ—¶å®¢æˆ·ç«¯ç›´æŽ¥ä»Žç¼“å­˜ä¸­èŽ·å–æ‰€è¯·æ±‚çš„æ•°æ®ï¼Œå¦‚æžœæ ‡è¯†å¤±æ•ˆï¼ŒæœåŠ¡ç«¯ä¼šè¿”å›žæ›´æ–°åŽçš„æ•°æ®ã€‚ ä¸¤ç±»ç¼“å­˜æœºåˆ¶å¯ä»¥åŒæ—¶å­˜åœ¨ï¼Œå¼ºåˆ¶ç¼“å­˜çš„ä¼˜å…ˆçº§é«˜äºŽåå•†ç¼“å­˜ï¼Œå½“æ‰§è¡Œå¼ºåˆ¶ç¼“å­˜æ—¶ï¼Œå¦‚è‹¥ç¼“å­˜å‘½ä¸­ï¼Œåˆ™ç›´æŽ¥ä½¿ç”¨ç¼“å­˜æ•°æ®åº“æ•°æ®ï¼Œä¸åœ¨è¿›è¡Œç¼“å­˜åå•†ã€‚ Last-Modified If-Moified-Since åœ¨æµè§ˆå™¨ç¬¬ä¸€æ¬¡è¯·æ±‚æŸä¸€ä¸ªURLæ—¶ï¼ŒæœåŠ¡å™¨ç«¯çš„è¿”å›žçŠ¶æ€ç ä¼šæ˜¯200ï¼Œå“åº”çš„å®žä½“å†…å®¹æ˜¯å®¢æˆ·ç«¯è¯·æ±‚çš„èµ„æºï¼ŒåŒæ—¶æœ‰ä¸€ä¸ªLast-Modifiedçš„å±žæ€§æ ‡è®°æ­¤æ–‡ä»¶åœ¨æœåŠ¡å™¨ç«¯æœ€åŽè¢«ä¿®æ”¹çš„æ—¶é—´ã€‚Last-Modified : Fri , 12 May 2006 18:53:33 GMT å½“æµè§ˆå™¨ç¬¬äºŒæ¬¡è¯·æ±‚è¿™ä¸ªURLçš„æ—¶å€™ï¼Œæ ¹æ®HTTPåè®®è§„å®šï¼Œæµè§ˆå™¨ä¼šæŠŠç¬¬ä¸€æ¬¡Last-Modifiedçš„å€¼å­˜å‚¨åœ¨If-Modified-Sinceé‡Œé¢å‘é€ç»™æœåŠ¡ç«¯æ¥éªŒè¯èµ„æºæœ‰æ²¡æœ‰ä¿®æ”¹ã€‚If-Modified-Since : Fri , 12 May 2006 18:53:33 GMT æœåŠ¡ç«¯é€šè¿‡If-Modified-Sinceå­—æ®µæ¥åˆ¤æ–­åœ¨è¿™ä¸¤æ¬¡è®¿é—®æœŸé—´èµ„æºæœ‰æ²¡æœ‰è¢«ä¿®æ”¹è¿‡ï¼Œä»Žè€Œå†³å®šæ˜¯å¦è¿”å›žå®Œæ•´çš„èµ„æºã€‚å¦‚æžœæœ‰ä¿®æ”¹æ­£å¸¸è¿”å›žèµ„æºï¼ŒçŠ¶æ€ç 200ï¼Œå¦‚æžœæ²¡æœ‰ä¿®æ”¹åªè¿”å›žå“åº”å¤´ï¼ŒçŠ¶æ€ç 304ï¼Œå‘ŠçŸ¥æµè§ˆå™¨èµ„æºçš„æœ¬åœ°ç¼“å­˜è¿˜å¯ç”¨ã€‚ Last-Modifiedæœ‰å‡ ä¸ªç¼ºç‚¹ï¼šæ²¡æ³•å‡†ç¡®çš„åˆ¤æ–­èµ„æºæ˜¯å¦çœŸçš„ä¿®æ”¹äº†ï¼Œæ¯”å¦‚æŸä¸ªæ–‡ä»¶åœ¨1ç§’å†…é¢‘ç¹æ›´æ”¹äº†å¤šæ¬¡ï¼Œæ ¹æ®Last-Modifiedçš„æ—¶é—´(å•ä½æ˜¯ç§’)æ˜¯åˆ¤æ–­ä¸å‡ºæ¥çš„ï¼Œå†æ¯”å¦‚ï¼ŒæŸä¸ªèµ„æºåªæ˜¯ä¿®æ”¹äº†ï¼Œä½†å®žé™…å†…å®¹å¹¶æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼ŒLast-Modifiedä¹Ÿæ— æ³•åˆ¤æ–­å‡ºæ¥ï¼Œå› æ­¤åœ¨HTTP/1.1ä¸­è¿˜æŽ¨å‡ºäº†ETagè¿™ä¸ªå­—æ®µðŸ‘‡ Etag If-None-Match åœ¨æµè§ˆå™¨ç¬¬ä¸€æ¬¡è¯·æ±‚æŸä¸€ä¸ªURLæ—¶ï¼ŒæœåŠ¡å™¨å¯ä»¥é€šè¿‡æŸç§è‡ªå®šçš„ç®—æ³•å¯¹èµ„æºç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯†(æ¯”å¦‚md5æ ‡è¯†)ï¼Œ å¹¶è¿”ç»™æµè§ˆå™¨ETag: abc-123456 å½“æµè§ˆå™¨ç¬¬äºŒæ¬¡è¯·æ±‚è¿™ä¸ªURLçš„æ—¶å€™ï¼Œæ ¹æ®HTTPåè®®è§„å®šï¼Œæµè§ˆå™¨å›žæŠŠç¬¬ä¸€æ¬¡ETagçš„å€¼å­˜å‚¨åœ¨If-None-Matché‡Œé¢å‘é€ç»™æœåŠ¡ç«¯æ¥éªŒè¯èµ„æºæœ‰æ²¡æœ‰ä¿®æ”¹ã€‚If-None-Match: abc-123456 Getè¯·æ±‚ä¸­ï¼Œå½“ä¸”ä»…å½“æœåŠ¡å™¨ä¸Šæ²¡æœ‰ä»»ä½•èµ„æºçš„ETagå±žæ€§å€¼ä¸Žè¿™ä¸ªé¦–éƒ¨ä¸­åˆ—å‡ºçš„ç›¸åŒ¹é…çš„æ—¶å€™ï¼ŒæœåŠ¡å™¨ç«¯ä¼šæ‰è¿”å›žæ‰€è¯·æ±‚çš„èµ„æºï¼Œå“åº”ç ä¸º200ã€‚å¦‚æžœæ²¡æœ‰èµ„æºçš„ETagå€¼ç›¸åŒ¹é…ï¼Œé‚£ä¹ˆè¿”å›ž304çŠ¶æ€ç ã€‚ POSTã€PUTç­‰è¯·æ±‚æ”¹å˜æ–‡ä»¶çš„è¯·æ±‚ï¼Œå¦‚æžœæ²¡æœ‰èµ„æºçš„ETagå€¼ç›¸åŒ¹é…ï¼Œé‚£ä¹ˆè¿”å›ž412çŠ¶æ€ç ã€‚ å½“ç„¶å’ŒLast-Modifiedç›¸æ¯”ï¼ŒETagä¹Ÿæœ‰è‡ªå·±çš„ç¼ºç‚¹ï¼Œæ¯”å¦‚ç”±äºŽéœ€è¦å¯¹èµ„æºè¿›è¡Œç”Ÿæˆæ ‡è¯†ï¼Œæ€§èƒ½æ–¹é¢å°±åŠ¿å¿…æœ‰æ‰€ç‰ºç‰²ã€‚ If-None-Matchä¼˜å…ˆçº§å¤§äºŽLast-Modifiedå¯å‘å¼ç¼“å­˜ Age:23146 Cache-Control: public Date:Tue, 28 Nov 2017 12:26:41 GMT Last-Modified:Tue, 28 Nov 2017 05:14:02 GMT Vary:Accept-Encoding å¦‚æžœæµè§ˆå™¨ç”¨æ¥ç¡®å®šç¼“å­˜è¿‡æœŸæ—¶é—´çš„å­—æ®µä¸€ä¸ªéƒ½æ²¡æœ‰ï¼é‚£è¯¥æ€Žä¹ˆåŠžï¼Ÿå¯å‘å¼ç¼“å­˜ï¼ æ ¹æ®å“åº”å¤´ä¸­2ä¸ªæ—¶é—´å­—æ®µ Date å’Œ Last-Modified ä¹‹é—´çš„æ—¶é—´å·®å€¼ï¼Œå–å…¶å€¼çš„10%ä½œä¸ºç¼“å­˜æ—¶é—´å‘¨æœŸã€‚ ç”¨æˆ·è¡Œä¸º æ‰“å¼€æ–°çª—å£ å¦‚æžœæŒ‡å®šcache-controlçš„å€¼ä¸ºprivateã€no-cacheã€must-revalidate,é‚£ä¹ˆæ‰“å¼€æ–°çª—å£è®¿é—®æ—¶éƒ½ä¼šé‡æ–°è®¿é—®æœåŠ¡å™¨ã€‚è€Œå¦‚æžœæŒ‡å®šäº†max-ageå€¼,é‚£ä¹ˆåœ¨æ­¤å€¼å†…çš„æ—¶é—´é‡Œå°±ä¸ä¼šé‡æ–°è®¿é—®æœåŠ¡å™¨ åœ¨åœ°å€æ å›žè½¦ å¦‚æžœå€¼ä¸ºprivateæˆ–must-revalidate,åˆ™åªæœ‰ç¬¬ä¸€æ¬¡è®¿é—®æ—¶ä¼šè®¿é—®æœåŠ¡å™¨,ä»¥åŽå°±ä¸å†è®¿é—®ã€‚å¦‚æžœå€¼ä¸ºno-cache,é‚£ä¹ˆæ¯æ¬¡éƒ½ä¼šè®¿é—®ã€‚å¦‚æžœå€¼ä¸ºmax-age,åˆ™åœ¨è¿‡æœŸä¹‹å‰ä¸ä¼šé‡å¤è®¿é—®ã€‚ æŒ‰åŽé€€æŒ‰æ‰­ å¦‚æžœå€¼ä¸ºprivateã€must-revalidateã€max-age,åˆ™ä¸ä¼šé‡è®¿é—®,è€Œå¦‚æžœä¸ºno-cache,åˆ™æ¯æ¬¡éƒ½é‡å¤è®¿é—®. æŒ‰åˆ·æ–°æŒ‰æ‰­ F5 æ— è®ºä¸ºä½•å€¼,éƒ½ä¼šé‡å¤è®¿é—®.è¯·æ±‚å¸¦ä¸ŠIf-Modify-sinceï¼ŒåŽ»æœåŠ¡å™¨çœ‹çœ‹è¿™ä¸ªæ–‡ä»¶æ˜¯å¦æœ‰è¿‡æœŸäº† æŒ‰å¼ºåˆ¶åˆ·æ–°æŒ‰é’® CTRL/F5 æµè§ˆå™¨åˆ é™¤ç¼“å­˜ï¼Œå½“åšé¦–æ¬¡è¿›å…¥é‡æ–°è¯·æ±‚(è¿”å›žçŠ¶æ€ç 200) å®žè·µ æœ€ä½³å®žè·µï¼Œå°±åº”è¯¥æ˜¯å°½å¯èƒ½å‘½ä¸­å¼ºç¼“å­˜ï¼ŒåŒæ—¶ï¼Œèƒ½åœ¨æ›´æ–°ç‰ˆæœ¬çš„æ—¶å€™è®©å®¢æˆ·ç«¯çš„ç¼“å­˜å¤±æ•ˆã€‚ å‰ç«¯æ‰“åŒ…åŠ hash webpackç»™æˆ‘ä»¬æä¾›äº†ä¸‰ç§å“ˆå¸Œå€¼è®¡ç®—æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯hashã€chunkhashå’Œcontenthash hash åªè¦æœ‰ä¸€ä¸ªæ–‡ä»¶å˜åŒ–ï¼Œæ•´ä¸ªé¡¹ç›®éƒ½hashéƒ½ä¼šå˜ï¼Œæ˜¾ç„¶ä¸è¡Œ const path = require('path'); module.exports = { entry: { index: './src/index.js', main: './src/main.js' }, output: { path: path.resolve(__dirname, 'dist'), filename: '[name].[hash].js', } } chunkhash åŒä¸€æ¨¡å—ä¸­ä¸€ä¸ªæ–‡ä»¶å˜åŒ–ï¼Œæ•´ä¸ªæ¨¡å—hashå˜åŒ–ã€‚çœ‹èµ·æ¥è¿˜è¡Œï¼Œä¸è¿‡å¦‚æžœjså’Œcssæ˜¯åˆ†å¼€äº†çš„ï¼Œåªè¦å…¶ä¸­ä¸€ä¸ªå˜åŒ–ï¼Œæ•´ä¸ªæ¨¡å—çš„jså’Œcsséƒ½ä¼šå˜ module.exports = { output: { path: path.resolve(__dirname, 'dist'), filename: '[name].[chunkhash].js', } } contenthash åªè¦æ–‡ä»¶å†…å®¹ä¸ä¸€æ ·ï¼Œæ–‡ä»¶äº§ç”Ÿçš„å“ˆå¸Œå€¼å°±ä¸ä¸€æ ·ï¼Œæ˜¾ç„¶è¿™å°±æ˜¯æˆ‘ä»¬æƒ³è¦çš„ module.exports = { output: { path: path.resolve(__dirname, 'dist') filename: '[name].[contenthash].js', } }; Nginx å®˜æ–¹é»˜è®¤å¼€å¯ETagï¼Œæ‰€ä»¥è¿™é‡Œå°±ä¸ç”¨åšç‰¹åˆ«è®¾ç½®äº† åŽç«¯ å¼ºåˆ¶ç¼“å­˜res.setHeader('Cache-Control', 'public, max-age=xxx'); åå•†ç¼“å­˜res.setHeader('Cache-Control', 'public, max-age=0'); res.setHeader('Last-Modified', xxx); res.setHeader('ETag', xxx); å½“ç„¶ä¹Ÿæœ‰å¾ˆå¤šåº“,æ¯”å¦‚koaçš„koa-staticconst KoaStatic = require('koa-static'); app.use(KoaStatic('./',{ maxAge: 365 * 24 * 60 * 60 })); "},"doc/run/browser/performance/fast-load/cache/storage.html":{"url":"doc/run/browser/performance/fast-load/cache/storage.html","title":"storage","keywords":"","body":"storage "},"doc/run/browser/performance/fast-load/cache/offlineCache.html":{"url":"doc/run/browser/performance/fast-load/cache/offlineCache.html","title":"ç¦»çº¿ç¼“å­˜","keywords":"","body":"ç¦»çº¿ç¼“å­˜ "},"doc/run/browser/error-monitor/capture/capture.html":{"url":"doc/run/browser/error-monitor/capture/capture.html","title":"æ•èŽ·å¼‚å¸¸","keywords":"","body":" é”™è¯¯åˆ†ç±» js é”™è¯¯ èµ„æºè¯·æ±‚é”™è¯¯ æŽ¥å£æŠ¥é”™ æ•èŽ·æ–¹æ³•åˆ†ç±» try-catch window.onerror=function(){...} window.addEventListener('error',function(){...}) window.addEventListener(\"unhandledrejection\", (e) => {...}); vue é¡¹ç›® Vue.config.errorHandler = (error, vm, info) => {} react é¡¹ç›® componentDidCatch(err,info){} try-catch js æŠ¥é”™æœºåˆ¶ï¼Œå¦‚æžœä¸€ä¸ªä»»åŠ¡æ‰§è¡Œäº†ä¸€ä¸ªé”™è¯¯çš„æ–¹æ³•ï¼ŒåŽç»­ç¨‹åºæ‰§è¡Œåœæ­¢äº†ã€‚ä½†æ˜¯å¦å¤–ä¸€ä¸ªä»»åŠ¡å¹¶ä¸ä¼šå½±å“ã€‚ setTimeout(() => { console.log(\"start-1\"); console.log(a); console.log(\"end-1\"); }, 0); setTimeout(() => { console.log(\"start-2\"); console.log(\"end-2\"); }, 0); try catch æ•æ‰é”™è¯¯ setTimeout(() => { try { console.log(\"start-1\"); console.log(a); console.log(\"end-1\"); } catch (err) { console.log(\"catch\", err); } }, 0); setTimeout(() => { console.log(\"start-2\"); console.log(\"end-2\"); }, 0); ä½ å¯èƒ½æƒ³åœ¨åº•å±‚ try-catchï¼Œä½†æ˜¯ try-catch åœ¨å¼‚æ­¥ä¸­ä¼šå¤±æ•ˆ try { setTimeout(() => { console.log(\"start-1\"); console.log(a); console.log(\"end-1\"); }, 0); setTimeout(() => { console.log(\"start-2\"); console.log(\"end-2\"); }, 0); } catch (err) { console.log(\"catch\", err); } window.onerror window.onerror æœ€å¤§çš„å¥½å¤„å°±æ˜¯å¯ä»¥åŒæ­¥ä»»åŠ¡è¿˜æ˜¯å¼‚æ­¥ä»»åŠ¡éƒ½å¯æ•èŽ·ã€‚ setTimeout(() => { console.log(\"start-1\"); console.log(a); console.log(\"end-1\"); }, 0); setTimeout(() => { console.log(\"start-2\"); console.log(\"end-2\"); }, 0); window.onerror = (...args) => { console.log(\"onerror\", args); return true; //å¦‚æžœä¸è¿”å›žtrue,æŠ¥é”™ä¾ç„¶ä¼šä¸ŠæŠ› }; ä½†æ˜¯æ— æ³•èŽ·å–èµ„æºé”™è¯¯ï¼Œæ¯”å¦‚ ç›‘å¬ error äº‹ä»¶ å¯ä»¥ä½¿ç”¨ addEventListener error æ¥æ•èŽ·èµ„æºçš„é”™è¯¯ window.addEventListener( \"error\", (args) => { console.log(\"linstener err\", args); return true; }, { capture: true, //å¿…é¡»æ˜¯æ•èŽ·é˜¶æ®µï¼Œæ‰å¯ä»¥æ•èŽ·åˆ°èµ„æºé”™è¯¯ } ); window.onerror å’Œç›‘å¬ error äº‹ä»¶ï¼Œéƒ½æ•èŽ·ä¸åˆ° promiseï¼Œå¯ä»¥ç›‘å¬ unhandledrejection æ¥è§£å†³ ç›‘å¬ unhandledrejection äº‹ä»¶ window.addEventListener(\"unhandledrejection\", (e) => { console.log(\"unhandledrejection\", e.reason); throw e.reason; //è¿™é‡Œå¯ä»¥æŠ›å‡ºé”™è¯¯äº‹ä»¶ï¼Œä¹‹åŽäº¤ç”±window.onerrorç»Ÿä¸€å¤„ç† }); new Promise((res, rej) => { error; }); //awaitä¹Ÿå¯ä»¥ç›‘å¬åˆ° (async () => { await e; })(); æ€»ç»“ å¼‚å¸¸ç±»åž‹ åŒæ­¥ å¼‚æ­¥ èµ„æºåŠ è½½ promise try-catch æ”¯æŒ onerror æ”¯æŒ æ”¯æŒ ç›‘å¬ error æ”¯æŒ æ”¯æŒ æ”¯æŒ ç›‘å¬ unhandledrejection æ”¯æŒ ç»ˆæžæ–¹æ¡ˆ æ€è·¯ é’ˆå¯¹ js é”™è¯¯ ä½¿ç”¨onerror,å› ä¸º onerror æ¯”ç›‘å¬ error çš„ä¿¡æ¯æ›´å…¨ ä½¿ç”¨ç›‘å¬unhandledrejection èµ„æºè¯·æ±‚é”™è¯¯ ä½¿ç”¨ç›‘å¬error æŽ¥å£æŠ¥é”™ axios ä¸­ç»Ÿä¸€å°è£… æ¡†æž¶é”™è¯¯ vue é¡¹ç›® Vue.config.errorHandler = (error, vm, info) => {} react é¡¹ç›® componentDidCatch(err,info){} æ•ˆæžœ å®žè·µ å…¨å±€å¼‚å¸¸æ±‡æ€» function reportError(type, err, ...other) { console.group(`æ•èŽ·åˆ°é”™è¯¯ï¼š${err}`); console.log(`ç±»åž‹:${type}`); console.log(err); console.log(`å…¶ä»–ï¼š${other}`); console.groupEnd(); //è¿™é‡Œå¯ä»¥åšä¸Šä¼ é”™è¯¯ä¹‹ç±»çš„... } js é”™è¯¯ window.onerror = function (...args) { reportError(\"JsError\", args); }; åŠ è½½èµ„æºé”™è¯¯ window.addEventListener( \"error\", (event) => { // è¿‡æ»¤ js error const target = event.target || event.srcElement; const isElementTarget = target instanceof HTMLScriptElement || target instanceof HTMLLinkElement || target instanceof HTMLImageElement; if (!isElementTarget) { return false; } // ä¸ŠæŠ¥èµ„æºåœ°å€ const url = (target as HTMLScriptElement | HTMLImageElement).src || (target as HTMLLinkElement).href; reportError(\"ResourceLoadError\", url); }, true ); promise ç±»é”™è¯¯ window.addEventListener(\"unhandledrejection\", (e) => { throw e.reason; //æŠ›å‡ºé”™è¯¯äº‹ä»¶ç»Ÿä¸€å¤„ç† }); vue å…¨å±€é”™è¯¯ Vue.config.errorHandler = (error, vm, info) => { reportError(info, error); }; axios ç»Ÿä¸€æŽ¥å£é”™è¯¯ ... .catch((error) => { reportError( \"NetworkError\", error, `${opt.method ? opt.method : \"get\"}===${opt.url}===${JSON.stringify( opt.data )}` ); } ä½¿ç”¨ sentry é€šè¿‡ä¹‹å‰çš„é”™è¯¯æ”¶é›†ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥è‡ªå·±æ­å»ºä¸€ä¸ªå¼‚å¸¸ç›‘æŽ§å¹³å°äº†ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥é€‰æ‹©å…¶ä»–æˆç†Ÿçš„ç›‘æŽ§å¹³å°ï¼ŒSentry å°±æ˜¯è¿™æ ·ä¸€ä¸ªå¹³å°ã€‚Sentry æ˜¯ä¸€ä¸ªå¼€æºçš„å®žæ—¶é”™è¯¯è¿½è¸ªç³»ç»Ÿï¼Œå¯ä»¥å¸®åŠ©å¼€å‘è€…å®žæ—¶ç›‘æŽ§å¹¶ä¿®å¤å¼‚å¸¸é—®é¢˜ã€‚æä¾›äº†å¯¹å¤šç§ä¸»æµè¯­è¨€å’Œæ¡†æž¶çš„æ”¯æŒï¼ŒåŒ…æ‹¬ Reactã€Angularã€Nodeã€Djangoã€RoRã€PHPã€Laravelã€Androidã€.NETã€JAVA ç­‰ã€‚æˆ‘ä»¬å¯ä»¥ç›´æŽ¥ä½¿ç”¨å®ƒå®¶æä¾›çš„åœ¨çº¿æœåŠ¡ï¼Œä¹Ÿå¯ä»¥æœ¬åœ°è‡ªè¡Œæ­å»ºï¼› ä½¿ç”¨ Sentry "},"doc/run/browser/error-monitor/sentry/sentry.html":{"url":"doc/run/browser/error-monitor/sentry/sentry.html","title":"Sentry","keywords":"","body":" sentry Sentry æ˜¯ä¸€ä¸ªå¼€æºçš„å®žæ—¶é”™è¯¯è¿½è¸ªç³»ç»Ÿï¼Œå¯ä»¥å¸®åŠ©å¼€å‘è€…å®žæ—¶ç›‘æŽ§å¹¶ä¿®å¤å¼‚å¸¸é—®é¢˜ã€‚æä¾›äº†å¯¹å¤šç§ä¸»æµè¯­è¨€å’Œæ¡†æž¶çš„æ”¯æŒï¼ŒåŒ…æ‹¬ Reactã€Angularã€Nodeã€Djangoã€RoRã€PHPã€Laravelã€Androidã€.NETã€JAVA ç­‰ã€‚æˆ‘ä»¬å¯ä»¥ç›´æŽ¥ä½¿ç”¨å®ƒå®¶æä¾›çš„åœ¨çº¿æœåŠ¡ï¼Œä¹Ÿå¯ä»¥æœ¬åœ°è‡ªè¡Œæ­å»ºï¼› ä½¿ç”¨åœ¨çº¿æœåŠ¡ æ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œå®˜ç½‘ç›´æŽ¥ç”¨ ç§æœ‰åŒ–éƒ¨ç½² æ‹¥æœ‰è‡ªå·±çš„å¼‚å¸¸ç›‘æŽ§å¹³å°ï¼Œå°±å¾ˆé¦™ æ‹‰å–é•œåƒ docker pull redis docker pull postgres docker pull sentry å¯åŠ¨ redis å’Œ sentry docker run -d --name sentry-redis redis docker run -d --name sentry-postgres -e POSTGRES_PASSWORD=secret -e POSTGRES_USER=sentry postgres èŽ·å–å¯†é’¥ docker run --rm sentry config generate-secret-key è¿™é‡Œä¼šèŽ·å¾—å¯†é’¥ï¼Œè‡ªå·±ä¿å­˜å¥½ï¼ŒåŽé¢ä¼šç”¨ å¯åŠ¨æœåŠ¡ docker run -it --rm -e SENTRY_SECRET_KEY='ä½ çš„å¯†é’¥' --link sentry-postgres:postgres --link sentry-redis:redis sentry upgrade ï¼ˆè¿™ä¸€æ­¥ä¼šæç¤ºä½¿ç”¨é‚®ç®±å’Œå¯†ç åˆ›å»ºç”¨æˆ·ï¼Œä¹‹åŽå¯ä»¥è¿›å…¥my-sentry,ä½¿ç”¨sentry createuserå†æ¬¡å»ºç«‹ï¼‰ docker run -d -p 9000:9000 --name my-sentry -e SENTRY_SECRET_KEY='ä½ çš„å¯†é’¥' --link sentry-redis:redis --link sentry-postgres:postgres sentry docker run -d --name sentry-cron -e SENTRY_SECRET_KEY='ä½ çš„å¯†é’¥' --link sentry-postgres:postgres --link sentry-redis:redis sentry run cron docker run -d --name sentry-worker-1 -e SENTRY_SECRET_KEY='ä½ çš„å¯†é’¥' --link sentry-postgres:postgres --link sentry-redis:redis sentry run worker æŸ¥çœ‹å®¹å™¨ docker ps -a æŸ¥çœ‹å®¹å™¨ï¼Œå…¶ä¸­ my-sentry æ˜¯ä¸»ç¨‹åº sentry-worker æ˜¯ sentry çš„å¼‚æ­¥é˜Ÿåˆ— sentry-corn æ˜¯ sentry çš„å®šæ—¶ä»»åŠ¡ sentry-postgres æ˜¯æ•°æ®åº“ sentry-redis æ˜¯ç¼“å­˜ é…ç½®é‚®ç®± åƒæµ‹è¯•é‚®ä»¶æ˜¯ä½¿ç”¨ sentry çš„ä¸»ç¨‹åºæµ‹è¯•çš„ï¼Œè€Œå¹³å¸¸æ”¶åˆ°çš„å¼‚å¸¸æ—¥å¿—å’Œé‚€è¯·é‚®ä»¶æ˜¯ sentry-worker å¼‚æ­¥æ‰§è¡Œçš„ï¼Œå¦‚æžœåªæ”¹äº†ä¸»ç¨‹åºï¼Œé‚£ä¹ˆå°±ä¼šå‡ºçŽ°æµ‹è¯•é‚®ä»¶çš„æ—¶å€™æ­£å¸¸ï¼Œå´æ”¶ä¸åˆ°å¼‚å¸¸æ—¥å¿—å’Œé‚€è¯·é‚®ä»¶çš„æƒ…å†µã€‚ è¿›å…¥ä¸»å®¹å™¨ my-sentry cd /etc/sentry/ vim config.yml å¦‚æžœæ²¡æœ‰å®‰è£… vim apt-get update apt-get install vim -y é…ç½® config.yml é‚®ç®±è®¾ç½® ############### # Mail Server # ############### # ä¿®æ”¹è¿™é‡Œï¼Œå–æ¶ˆåŽŸæœ¬çš„æ³¨é‡Š mail.backend: 'smtp' mail.host: 'smtp.qq.com' #é‚®ç®±å¯¹åº”çš„smtpåŸŸå mail.port: 587 #é‚®ç®±å¯¹åº”ç«¯å£ mail.username: 'xx@xx.com' #ä½ çš„é‚®ç®± mail.password: 'pwd' #ä½ è®¾ç½®çš„å¯†ç ï¼Œæ³¨æ„ä¸æ˜¯é‚®ç®±ç™»å½•å¯†ç  mail.use-tls: true #æ˜¯å¦ä½¿ç”¨tlsè¿žæŽ¥ #The email address to send on behalf of mail.from: 'xx@xx.com' #å‘é€è€…ï¼Œå¡«çš„å’Œuserä¸€æ ·å°±è¡Œ # If you'd like to configure email replies, enable this. exit é€€å‡ºå®¹å™¨ docker restart xxxxx é‡å¯å®¹å™¨ ç„¶åŽå°† sentry-worker å®¹å™¨ä¹Ÿä¸€æ ·æ”¹æŽ‰å°±è¡Œã€‚ é¡¹ç›®ä½¿ç”¨ å› ä¸º onerror ä¿¡æ¯æ¯”ç›‘å¬ error æ›´å…¨ï¼Œæ‰€ä»¥ sentry æ˜¯ç”¨çš„ onerrorï¼Œå’Œç›‘å¬ unhandledrejection,è¿™æ ·æˆ‘ä»¬åªéœ€è¦è¡¥å…¨èµ„æºé”™è¯¯ï¼Œvue/reacté¡¹ç›®é”™è¯¯,æŽ¥å£æŠ¥é”™å°±å¯ä»¥äº† æ•´ä¸€ä¸ª Sentry ç±»å‡ºæ¥ï¼Œå®žçŽ°ç›‘å¬èµ„æºé”™è¯¯ä¸ŠæŠ¥å’Œæš´éœ²ä¸ŠæŠ¥æ–¹æ³• // Report.ts import * as Sentry from \"@sentry/browser\"; import * as Integrations from \"@sentry/integrations\"; type Environment = \"production\" | \"development\"; interface ReportOptions { enabled?: boolean; dsn: string; release: string; environment: Environment; } class Report { public Vue: any; public options: ReportOptions; private static instance: Report; constructor(Vue: any, options: ReportOptions) { this.Vue = Vue; this.options = options; } public static getInstance(Vue: any, options: ReportOptions) { if (!this.instance) { this.instance = new Report(Vue, options); this.instance.init(); this.instance.loadListener(); } return this.instance; } // åˆå§‹åŒ– public init() { Sentry.init({ enabled: this.options.enabled, dsn: this.options.dsn, integrations: [ new Integrations.Vue({ Vue: this.Vue, attachProps: true }), ], release: this.options.release, environment: this.options.environment, }); } // ä¸»åŠ¨ä¸ŠæŠ¥ public log(info: any) { Sentry.withScope((scope) => { Object.keys(info).forEach((key) => { if (key !== \"error\") { scope.setExtra(key, info[key]); } }); Sentry.captureException(info.error || new Error(\"æœªçŸ¥é”™è¯¯\")); }); } // å…¨å±€ç›‘æŽ§èµ„æºåŠ è½½é”™è¯¯ public loadListener() { window.addEventListener( \"error\", (event) => { // è¿‡æ»¤ js error const target = event.target || event.srcElement; const isElementTarget = target instanceof HTMLScriptElement || target instanceof HTMLLinkElement || target instanceof HTMLImageElement; if (!isElementTarget) { return false; } // ä¸ŠæŠ¥èµ„æºåœ°å€ const url = (target as HTMLScriptElement | HTMLImageElement).src || (target as HTMLLinkElement).href; this.log({ error: new Error(`ResourceLoadError: ${url}`), type: \"resource load\", }); }, true ); } } export default Report; æ·»åŠ  vue å…¨å±€é”™è¯¯ä¸ŠæŠ¥ //main.ts //å…¨å±€ç›‘æŽ§ const sentry = Report.getInstance(Vue, { enabled: process.env.NODE_ENV === \"production\", dsn: SENTRYDSN, release: version, environment: process.env.NODE_ENV, }); Vue.prototype.$sentry = sentry; Vue.config.errorHandler = (error, vm, info) => { console.log(\"errorHandler\", error, vm, info); vm.$sentry.log({ error, type: \"vue errorHandler\", vm, info, }); }; let VueApp = new Vue({ router, store, render: (h) => h(App), }).$mount(\"#app\"); export default VueApp; æ·»åŠ  axios æŽ¥å£é”™è¯¯ä¸ŠæŠ¥ //fetch.ts import VueApp from \"@/main\"; axiosInstance.interceptors.response.use( (res) => { ... }, err => { VueApp.$sentry.log({ error: err, type: \"callNative\", config: err.config }); ... } ); "}}